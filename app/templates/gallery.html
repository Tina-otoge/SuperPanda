{% extends "base.html" %}
{% set json = url_for('.gallery_json', id=data.id, token=data.token) %}
{% set title = data.extracted_title %}

{% block content %}
<p>
	<a id="back-to-home" href="{{ url_for('.galleries') }}">Back to home page</a>
</p>
<div id="gallery">
	<div class="info">
		<a href="{{ data.first_page.reader_url }}" class="cover">
			<img src="{{ data.cover_url }}">
		</a>
		<div class="meta">
			<header>
				<h1 class="title">
					{{ title }}
				</h1>
				<span class="artist">
					{% if data.artist %}
					<a href="{{ url_for('.galleries', search=data.artist) }}">
						{{ data.artist.value }}
					</a>
					{% endif %}
					{% if data.group_not_artist %}
					<a href="{{ url_for('.galleries', search=data.group_not_artist) }}" class="group">
						({{ data.group_not_artist.value }})
					</a>
					{% endif %}
				</span>
				{% if data.title != data.extracted_title %}
				<div class="actual-title">{{ data.title }}</div>
				{% endif %}
			</header>
			<div class="tags">
				{% for namespace, tags in data.tags_by_namespaces.items() %}
				<div class="tags-group {{ namespace }}">
					<span class="namespace">{{ namespace }}:</span>
					{% for tag in tags %}
					<a href="{{ url_for('.galleries', search=tag) }}" class="tag">{{ tag.value }}</a>
					{% endfor %}
				</div>
				{% endfor %}
			</div>
			<div class="buttons">
				<a href="{{ data.url }}" class="button">See on EH</a>
				<!-- <a class="button">Add to favorites</a> -->
			</div>
		</div>
	</div>
	<div class="pages">
		{% for page in data.pages.values() %}
		<a
			href="{{ page.reader_url }}"
			class="page"
			style="{{ page.style }}">
		</a>
		{% endfor %}
	</div>
	<div class="pager">
		{% if page > 1 %}
		<a href="{{ url_for('.gallery', id=data.id, token=data.token, page=page - 1) }}">Prev</a>
		{% endif %}
		<span class="current-page">{{ page }}</span>
		<a href="{{ url_for('.gallery', id=data.id, token=data.token, page=page + 1) }}">Next</a>
	</div>
</div>
{% endblock %}
